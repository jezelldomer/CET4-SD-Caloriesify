/* * Copyright (c) 2020 Ruslan Potekhin */package com.feedapp.app.ui.notifications;import android.app.NotificationManager;import android.app.PendingIntent;import android.content.Context;import android.content.Intent;import android.media.RingtoneManager;import android.net.Uri;import androidx.annotation.NonNull;import androidx.core.app.NotificationCompat;import com.feedapp.app.R;import com.feedapp.app.ui.activities.DetailedFoodActivity;import com.google.firebase.messaging.FirebaseMessagingService;import com.google.firebase.messaging.RemoteMessage;import org.jetbrains.annotations.NotNull;public class FBCloudNotification extends FirebaseMessagingService {    @Override    public void onNewToken(@NonNull String s) {        super.onNewToken(s);    }    @Override    public void onMessageReceived(@NotNull RemoteMessage remoteMessage) {        try {            sendNotification(remoteMessage.getNotification().getBody());        } catch (Exception exc) {            exc.printStackTrace();        }    }    private void sendNotification(String messageBody) {        Intent intent = new Intent(getBaseContext(), DetailedFoodActivity.class);        intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);        PendingIntent pendingIntent = PendingIntent.getActivity(getBaseContext(), 0, intent,                PendingIntent.FLAG_ONE_SHOT);        Uri defaultSoundUri = RingtoneManager.getDefaultUri(RingtoneManager.TYPE_NOTIFICATION);        NotificationCompat.Builder notificationBuilder = new NotificationCompat.Builder(getBaseContext())                .setSmallIcon(R.drawable.icon)                .setContentTitle(getString(R.string.app_name))                .setContentText(messageBody)                .setAutoCancel(true)                .setSound(defaultSoundUri)                .setContentIntent(pendingIntent);        NotificationManager notificationManager =                (NotificationManager) getSystemService(Context.NOTIFICATION_SERVICE);        if (notificationManager != null) {            notificationManager.notify(0, notificationBuilder.build());        }    }}